<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI 2027 Game Test</title>
</head>
<body>
    <h1>Testing AI 2027 Game</h1>
    <div id="test-results"></div>
    
    <script>
        const results = document.getElementById('test-results');
        
        function log(message, isError = false) {
            const p = document.createElement('p');
            p.textContent = message;
            p.style.color = isError ? 'red' : 'green';
            results.appendChild(p);
        }
        
        // Test loading all JavaScript files
        const scripts = [
            'src/js/config.js',
            'src/js/state.js',
            'src/js/saveSystem.js',
            'src/js/resources.js',
            'src/js/balance-config.js',
            'src/js/cards.js',
            'src/js/crisis.js',
            'src/js/newspaper.js',
            'src/js/ui.js',
            'src/js/ui-enhancements.js',
            'src/js/splash.js',
            'src/js/game.js'
        ];
        
        let loadedCount = 0;
        
        scripts.forEach(script => {
            const scriptElement = document.createElement('script');
            scriptElement.src = script;
            scriptElement.onload = () => {
                loadedCount++;
                log(`✓ Loaded: ${script}`);
                
                if (loadedCount === scripts.length) {
                    runTests();
                }
            };
            scriptElement.onerror = () => {
                log(`✗ Failed to load: ${script}`, true);
            };
            document.head.appendChild(scriptElement);
        });
        
        async function runTests() {
            log('\n--- Running Tests ---');
            
            // Test 1: Check if all modules exist
            const modules = ['Config', 'GameState', 'SaveSystem', 'Resources', 'Cards', 'Crisis', 'UI', 'Game', 'Newspaper'];
            modules.forEach(module => {
                if (window[module]) {
                    log(`✓ ${module} module exists`);
                } else {
                    log(`✗ ${module} module missing`, true);
                }
            });
            
            // Test 2: Check data loading
            try {
                log('\n--- Testing Data Loading ---');
                const cardsLoaded = await Cards.loadCardsData();
                log(`✓ Cards data loaded: ${cardsLoaded}`);
                
                const crisisLoaded = await Crisis.loadCrisisData();
                log(`✓ Crisis data loaded: ${crisisLoaded}`);
            } catch (error) {
                log(`✗ Data loading error: ${error.message}`, true);
            }
            
            // Test 3: Check game state
            try {
                log('\n--- Testing Game State ---');
                GameState.reset();
                log(`✓ Game state reset successful`);
                log(`✓ Initial resources: ${JSON.stringify(GameState.current.resources)}`);
            } catch (error) {
                log(`✗ Game state error: ${error.message}`, true);
            }
            
            // Test 4: Check resource formulas
            try {
                log('\n--- Testing Resource Formulas ---');
                const progress = Config.formulas.progressPerTurn(50, 50, 100);
                log(`✓ Progress formula: ${progress}`);
                
                const knowledge = Config.formulas.knowledgePerTurn(50, 1);
                log(`✓ Knowledge formula: ${knowledge}`);
            } catch (error) {
                log(`✗ Formula error: ${error.message}`, true);
            }
        }
    </script>
</body>
</html>