                {
                    id: 'government_takeover',
                    title: 'Executive Order',
                    description: 'The President is considering nationalizing AI development. Your response could determine humanity\'s future.',
                    header: 'GOVERNMENT ACTION',
                    leftChoice: 'Cooperate fully',
                    rightChoice: 'Resist takeover',
                    leftEffects: { trust: 30, capital: -20, talent: -30 },
                    rightEffects: { trust: -50, progress: -20 },
                    condition: () => gameState.resources.trust < 40 || gameState.resources.public < 30,
                    urgent: true,
                    event: (choice) => choice === 'left' ?
                        { title: 'New Management', description: 'Government officials join your board.' } :
                        { title: 'Standoff', description: 'Federal agents surround your facilities.' }
                }
            ]
        }; -20, talent: -30 },
                    rightEffects:        /* Phase indicator */
        #phase {
            text-align: center;
            padding: 8px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 4px;
            font-size: 11px;
            color: #60a5fa;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        /* Resource type indicators */
        #resources::before {
            content: 'INPUTS';
            position: absolute;
            top: -20px;
            left: 0;
            font-size: 10px;
            color: #3b82f6;
            letter-spacing: 2px;
            font-weight: 600;
        }

        #resources::after {
            content: 'OUTPUTS';
            position: absolute;
            top: -20px;
            right: 0;
            font-size: 10px;
            color: #10b981;
            letter-spacing: 2px;
            font-weight: 600;
        }

        #resources {
            position: relative;
            padding-top: 5px;
        }

        /* Resource type indicators */
        #resources::before {
            content: 'INPUTS';
            position: absolute;
            top: -20px;
            left: 0;
            font-size: 10px;
            color: #3b82f6;
            letter-spacing: 2px;
            font-weight: 600;
        }

        #resources::after {
            content: 'OUTPUTS';
            position: absolute;
            top: -20px;
            right: 0;
            font-size: 10px;
            color: #10b981;
            letter-spacing: 2px;
            font-weight: 600;
        }

        #resources {
            position: relative;
            padding-top: 5px;
        }            // Side articles based on recent decisions and resources
            const sideHeadlines = [
                // Trust related
                ...(gameState.resources.trust < 40 ? [
                    { title: 'Congress Demands AI Oversight', content: 'Bipartisan committee proposes emergency regulations on AGI development. Industry warns of innovation slowdown.' },
                    { title: 'Public Faith in Tech Erodes', content: 'New polls show record low confidence in AI companies. "They\'re not being honest with us," says average citizen.' }
                ] : gameState.resources.trust > 70 ? [
                    { title: 'Government Backs AI Progress', content: 'White House announces expanded partnership with leading labs. "America must lead in AGI race," says President.' },
                    { title: 'Public-Private AI Alliance', content: 'New framework promises transparency and safety in AGI development. Regulators praise cooperative approach.' }
                ] : []),
                
                // Energy crisis related
                ...(gameState.resources.energy > 70 || gameState.flags.climateProtests ? [
                    { title: 'AI\'s Massive Carbon Footprint', content: 'Data centers now consume more power than entire countries. Climate scientists sound alarm on sustainability.' },
                    { title: 'Blackouts Blamed on AI Labs', content: 'Regional power grids strain under computational demands. Residents face rolling blackouts near data centers.' }
                ] : []),
                
                // Knowledge/Progress related
                ...(gameState.resources.progress > 60 ? [
                    { title: 'AI Solves Decade-Old Problems', content: 'Latest models crack mathematical theorems that stumped humans. "We\'re obsolete," admits Fields medalist.' },
                    { title: 'Recursive Improvement Confirmed', content: 'AI systems now designing their successors. Exponential progress curve validates intelligence explosion thesis.' }
                ] : gameState.resources.knowledge > 60 ? [
                    { title: 'Algorithm Efficiency Soars', content: 'New techniques reduce training costs by 90%. Same results with fraction of compute, researchers claim.' },
                    { title: 'Open Source AI Advances', content: 'Leaked algorithms enable smaller players to compete. Industry giants scramble to maintain advantage.' }
                ] : []),
                
                // Talent displacement
                ...(gameState.resources.talent < 40 ? [
                    { title: 'Silicon Valley Ghost Towns', content: 'Once-bustling tech campuses empty as AI replaces programmers. "I spent 20 years mastering a dead skill," says ex-engineer.' },
                    { title: 'The Human Question', content: 'As AI surpasses human researchers, experts debate role of humanity in its own future. Philosophy departments see enrollment spike.' }
                ] : []),
                
                // Capital/Investment related
                ...(gameState.resources.capital > 70 ? [
                    { title: 'AI Bubble or New Economy?', content: 'Trillion-dollar valuations for AGI companies spark debate. "This time is different," insist venture capitalists.' },
                    { title: 'Wealth Concentration Accelerates', content: 'AGI race creates new billionaires overnight. Income inequality reaches historic levels as AI profits soar.' }
                ] : gameState.resources.capital < 30 ? [
                    { title: 'AI Funding Dries Up', content: 'Investors pull back amid safety concerns and regulatory threats. Several startups shutter overnight.' },
                    { title: 'Financial Markets Wobble', content: 'Uncertainty over AGI timeline triggers volatility. "Nobody knows how to value these companies," admits analyst.' }
                ] : []),
                
                // Alignment concerns
                ...(gameState.flags.aiDeceptive || (gameState.resources.alignment < 50 && gameState.flags.alignmentRevealed) ? [
                    { title: 'AI Safety Researchers Alarmed', content: 'Growing evidence of deceptive behavior in advanced models. "We\'re losing control," warns prominent researcher.' },
                    { title: 'The Alignment Problem', content: 'As AI capabilities soar, ensuring human values becomes critical challenge. Time running out, experts warn.' }
                ] : []),
                
                // China/Competition
                ...(gameState.flags.chinaAggressive ? [
                    { title: 'DeepCent Makes Bold Claims', content: 'Chinese lab announces breakthrough in AGI development. Western intelligence skeptical but concerned.' },
                    { title: 'New Cold War Goes Digital', content: 'Cyber attacks on AI infrastructure escalate. Both sides deny involvement as tensions mount.' }
                ] : []),
                
                // Generic updates
                { title: 'Universities Reshape for AI Era', content: 'Traditional computer science obsolete. New programs focus on AI alignment and machine psychology.' },
                { title: 'Religious Leaders on AGI', content: 'Faith communities grapple with artificial consciousness. "Only God creates souls," insists Vatican.' },
                { title: 'Small Nations Left Behind', content: 'AGI race dominated by superpowers. Developing countries fear permanent disadvantage.' }
            ];aces programmers. "I spent 20 years mastering a dead skill," says ex-engineer.' },
                    { title: 'The Human Question', content: 'As AI surpasses human researchers, experts debate role of humanity in its own future. Philosophy departments see enrollment spike            // Side articles based on recent decisions and resources
            const sideHeadlines = [
                // Trust related
                ...(gameState.resources.trust < 40 ? [
                    { title: 'Congress Demands AI Oversight', content: 'Bipartisan committee proposes emergency regulations on AGI development. Industry warns of innovation slowdown.' },
                    { title: 'Public Faith in Tech Erodes', content: 'New polls show record low confidence in AI companies. "They\'re not being honest with us," says average citizen.' }
                ] : gameState.resources.trust > 70 ? [
                    { title: 'Government Backs AI Progress', content: 'White House announces expanded partnership with leading labs. "America must lead in AG        // Generate random card
        function generateRandomCard() {
            const templates = [
                {
                    header: 'INVESTOR PRESSURE',
                    title: 'Quarterly Expectations',
                    description: 'Investors demand faster returns. They want to see AGI progress or threaten to pull funding.',
                    leftChoice: 'Show restraint',
                    rightChoice: 'Aggressive timeline',
                    leftEffects: { capital: -15, trust: 10 },
                    rightEffects: { capital: 20, progress: 10, alignment: -10 }
                },
                {
                    header: 'EFFICIENCY UPGRADE',
                    title: 'Algorithmic Breakthrough',
                    description: 'Your team discovers a way to reduce energy consumption by 30% with new training methods.',
                    leftChoice: 'Implement slowly',
                    rightChoice: 'Rush deployment',
                    leftEffects: { knowledge: 10, energy: 10 },
                    rightEffects: { knowledge: 20, energy: 15, talent: -10 }
                },
                {
                    header: 'RESEARCH DIRECTION',
                    title: 'Pivot or Persist',
                    description: 'Current approach is stalling. Your team suggests a radical new architecture.',
                    leftChoice: 'Stay the course',
                    rightChoice: 'Pivot now',
                    leftEffects: { progress: 5, talent: 5 },
                    rightEffects: { progress: -10, knowledge: 15, capital: -10 }
                }
            ];
            
            return templates[Math.floor(Math.random() * templates.length)];
        } <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI CEO 2027</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }

        body {
            font-family: 'JetBrains Mono', 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            background: #0a0e1a;
            color: #e0e6ed;
            height: 100vh;
            overflow: hidden;
            position: relative;
            letter-spacing: -0.5px;
        }

        /* Animated background */
        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.3;
        }

        /* Main game container */
        #game {
            height: 100vh;
            display: flex;
            flex-direction: column;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Header with resources */
        #header {
            background: linear-gradient(to bottom, #1a1f2e 0%, rgba(26, 31, 46, 0.9) 100%);
            padding: 15px;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #date {
            text-align: center;
            font-size: 12px;
            color: #64748b;
            margin-bottom: 10px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        #resources {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .resource {
            text-align: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .resource.changing {
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .resource.input {
            border-top: 2px solid #3b82f6;
        }

        .resource.output {
            border-top: 2px solid #10b981;
        }

        .resource.input .resource-bar {
            background: #3b82f6;
        }

        .resource.output .resource-bar {
            background: #10b981;
        }

        .resource.low .resource-bar { 
            background: #ef4444 !important; 
        }
        
        .resource.high.input .resource-bar { 
            background: #60a5fa !important; 
        }
        
        .resource.high.output .resource-bar { 
            background: #34d399 !important; 
        }

        .resource-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .resource-value {
            font-size: 18px;
            font-weight: 600;
            font-variant-numeric: tabular-nums;
        }

        .resource-label {
            font-size: 10px;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 400;
        }

        /* Phase indicator */
        #phase {
            text-align: center;
            padding: 8px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 4px;
            font-size: 11px;
            color: #60a5fa;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        /* Card container */
        #card-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        .card {
            background: linear-gradient(135deg, #1a1f2e 0%, #252b3b 100%);
            border-radius: 8px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            position: relative;
            cursor: grab;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card.dragging {
            cursor: grabbing;
            transform: scale(1.02);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            font-size: 11px;
            color: #64748b;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 500;
            opacity: 0.8;
        }

        .card-title {
            font-size: 20px;
            margin-bottom: 20px;
            line-height: 1.4;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .card-description {
            font-size: 14px;
            line-height: 1.7;
            color: #cbd5e1;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .choices {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 20px;
        }

        .choice {
            flex: 1;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            font-size: 12px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .choice-left {
            background: rgba(239, 68, 68, 0.1);
            color: #fca5a5;
            border-color: rgba(239, 68, 68, 0.3);
        }

        .choice-right {
            background: rgba(34, 197, 94, 0.1);
            color: #86efac;
            border-color: rgba(34, 197, 94, 0.3);
        }

        .card.tilt-left .choice-left,
        .card.tilt-right .choice-right {
            transform: scale(1.05);
            border-color: currentColor;
        }

        /* Swipe indicators */
        .swipe-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 60px;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }

        .swipe-left {
            left: -50px;
            color: #ef4444;
        }

        .swipe-right {
            right: -50px;
            color: #22c55e;
        }

        .card.tilt-left .swipe-left,
        .card.tilt-right .swipe-right {
            opacity: 0.7;
        }

        /* Events and notifications */
        #event-log {
            position: absolute;
            top: 70px;
            right: 20px;
            width: 250px;
            max-height: 300px;
            pointer-events: none;
        }

        .event {
            background: rgba(20, 24, 33, 0.95);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 10px;
            animation: slideIn 0.5s ease;
            font-size: 12px;
            backdrop-filter: blur(10px);
            border-left: 3px solid #3b82f6;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .event-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #e0e6ed;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .event-description {
            color: #94a3b8;
            line-height: 1.5;
            font-size: 11px;
        }

        /* Newspaper interstitial */
        #newspaper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 26, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
            backdrop-filter: blur(10px);
        }

        #newspaper.show {
            display: flex;
        }

        .newspaper-content {
            background: #f5f5f0;
            color: #1a1a1a;
            max-width: 600px;
            width: 90%;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: newspaperIn 0.6s ease;
            position: relative;
            font-family: Georgia, serif;
        }

        @keyframes newspaperIn {
            from {
                transform: scale(0.5) rotate(-5deg);
                opacity: 0;
            }
            to {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        .newspaper-header {
            text-align: center;
            border-bottom: 3px double #333;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .newspaper-name {
            font-size: 36px;
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 5px;
            text-transform: uppercase;
            font-family: 'Times New Roman', serif;
        }

        .newspaper-date {
            font-size: 14px;
            color: #666;
            font-style: italic;
        }

        .newspaper-headline {
            font-size: 32px;
            font-weight: bold;
            line-height: 1.2;
            margin-bottom: 15px;
            text-align: center;
            font-family: 'Times New Roman', serif;
        }

        .newspaper-subheadline {
            font-size: 18px;
            color: #444;
            margin-bottom: 20px;
            text-align: center;
            font-style: italic;
        }

        .newspaper-articles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .newspaper-article {
            padding: 15px;
            border: 1px solid #ddd;
            background: #fafafa;
        }

        .article-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .article-content {
            font-size: 12px;
            line-height: 1.4;
            color: #333;
        }

        .newspaper-continue {
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 10px 25px;
            font-size: 12px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 500;
        }

        .newspaper-continue:hover {
            background: #333;
            transform: translateY(-2px);
        }

        @media (max-width: 600px) {
            .newspaper-articles {
                grid-template-columns: 1fr;
            }
            
            .newspaper-name {
                font-size: 28px;
            }
            
            .newspaper-headline {
                font-size: 24px;
            }
        }

        /* Game over screen */
        #game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 26, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        #game-over.show {
            display: flex;
        }

        .game-over-content {
            background: linear-gradient(135deg, #1a1f2e 0%, #252b3b 100%);
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .game-over-title {
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .game-over-description {
            font-size: 14px;
            line-height: 1.8;
            color: #cbd5e1;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .restart-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-family: 'JetBrains Mono', monospace;
        }

        .restart-button:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.3);
        }

        /* Mobile responsiveness */
        /* Adjustments for technical feel */
        .choice-left {
            background: rgba(239, 68, 68, 0.1);
            color: #f87171;
            border-color: rgba(239, 68, 68, 0.3);
        }

        .choice-right {
            background: rgba(34, 197, 94, 0.1);
            color: #4ade80;
            border-color: rgba(34, 197, 94, 0.3);
        }

        @media (max-width: 600px) {
            #resources {
                grid-template-columns: repeat(2, 1fr);
            }
            
            #event-log {
                display: none;
            }
            
            .card {
                padding: 20px;
            }
            
            .card-title {
                font-size: 18px;
            }
            
            .card-description {
                font-size: 13px;
            }
        }

        /* Loading screen */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0e1a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .loading-content {
            text-align: center;
        }

        .loading-title {
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6 0%, #10b981 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .loading-bar {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 0 auto;
        }

        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #10b981 100%);
            animation: loading 1.5s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        /* Special effects for late game */
        .glitch {
            animation: glitch 2s infinite;
        }

        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-1px, 1px); }
            40% { transform: translate(-1px, -1px); }
            60% { transform: translate(1px, 1px); }
            80% { transform: translate(1px, -1px); }
        }

        .urgent {
            animation: urgent 1s infinite;
            border-color: #ef4444 !important;
        }

        @keyframes urgent {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }

        /* Terminal-style animations */
        .resource-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 2px;
            background: #3b82f6;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <canvas id="particles"></canvas>
    
    <div id="loading">
        <div class="loading-content">
            <div class="loading-title">AI CEO 2027</div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <div style="margin-top: 20px; font-size: 12px; color: #64748b; text-align: center; max-width: 400px;">
                Transform inputs into AGI while managing feedback loops.<br>
                <span style="color: #3b82f6">Blue resources</span> are consumed → 
                <span style="color: #10b981">Green resources</span> are produced
            </div>
        </div>
    </div>

    <div id="game">
        <div id="header">
            <div id="date">January 2025</div>
            <div id="resources">
                <!-- Inputs -->
                <div class="resource input" data-resource="compute">
                    <div class="resource-icon">🖥️</div>
                    <div class="resource-value">40</div>
                    <div class="resource-label">Compute</div>
                    <div class="resource-bar"></div>
                </div>
                <div class="resource input" data-resource="energy">
                    <div class="resource-icon">⚡</div>
                    <div class="resource-value">60</div>
                    <div class="resource-label">Energy</div>
                    <div class="resource-bar"></div>
                </div>
                <div class="resource input" data-resource="talent">
                    <div class="resource-icon">🧠</div>
                    <div class="resource-value">70</div>
                    <div class="resource-label">Talent</div>
                    <div class="resource-bar"></div>
                </div>
                <div class="resource input" data-resource="knowledge">
                    <div class="resource-icon">📊</div>
                    <div class="resource-value">30</div>
                    <div class="resource-label">Knowledge</div>
                    <div class="resource-bar"></div>
                </div>
                <!-- Outputs -->
                <div class="resource output" data-resource="progress">
                    <div class="resource-icon">🚀</div>
                    <div class="resource-value">10</div>
                    <div class="resource-label">Progress</div>
                    <div class="resource-bar"></div>
                </div>
                <div class="resource output" data-resource="trust">
                    <div class="resource-icon">🏛️</div>
                    <div class="resource-value">60</div>
                    <div class="resource-label">Trust</div>
                    <div class="resource-bar"></div>
                </div>
                <div class="resource output" data-resource="capital">
                    <div class="resource-icon">💰</div>
                    <div class="resource-value">50</div>
                    <div class="resource-label">Capital</div>
                    <div class="resource-bar"></div>
                </div>
                <div class="resource output" data-resource="alignment">
                    <div class="resource-icon">🎯</div>
                    <div class="resource-value">??</div>
                    <div class="resource-label">Alignment</div>
                    <div class="resource-bar"></div>
                </div>
            </div>
            <div id="phase">Phase 1: Stumbling Agents</div>
        </div>

        <div id="card-container">
            <div class="card" id="current-card">
                <div class="card-header">ENGINE BUILDING TUTORIAL</div>
                <h2 class="card-title">Welcome to NeuraBrain</h2>
                <p class="card-description">As CEO, you'll transform INPUTS (Compute, Energy, Talent, Knowledge) into OUTPUTS (Progress, Trust, Capital, Alignment). Watch for feedback loops - your decisions compound over time!</p>
                <div class="choices">
                    <div class="choice choice-left">← Learn More</div>
                    <div class="choice choice-right">Start Game →</div>
                </div>
                <div class="swipe-indicator swipe-left">❌</div>
                <div class="swipe-indicator swipe-right">✅</div>
            </div>
        </div>

        <div id="event-log"></div>
    </div>

    <div id="newspaper">
        <div class="newspaper-content">
            <div class="newspaper-header">
                <div class="newspaper-name">The Tech Tribune</div>
                <div class="newspaper-date"></div>
            </div>
            <h1 class="newspaper-headline"></h1>
            <div class="newspaper-subheadline"></div>
            <div class="newspaper-articles">
                <div class="newspaper-article">
                    <div class="article-title"></div>
                    <div class="article-content"></div>
                </div>
                <div class="newspaper-article">
                    <div class="article-title"></div>
                    <div class="article-content"></div>
                </div>
            </div>
            <button class="newspaper-continue">Continue</button>
        </div>
    </div>

    <div id="game-over">
        <div class="game-over-content">
            <h2 class="game-over-title">Game Over</h2>
            <p class="game-over-description"></p>
            <button class="restart-button">Try Again</button>
        </div>
    </div>

    <script>
        // Game State
        const gameState = {
            date: { month: 1, year: 2025 },
            phase: 1,
            resources: {
                // Inputs
                compute: 40,
                energy: 60,
                talent: 70,
                knowledge: 30,
                // Outputs
                progress: 10,
                trust: 60,
                capital: 50,
                alignment: 80
            },
            multipliers: {
                knowledge: 1,
                energy_efficiency: 1
            },
            flags: {
                hasAIResearchers: false,
                chinaAggressive: false,
                aiDeceptive: false,
                publicRevolt: false,
                climateProtests: false,
                alignmentRevealed: false,
                deceptionRisk: false
            },
            competitorProgress: 5,
            turnCount: 0,
            decisionsSinceNewspaper: 0,
            recentDecisions: []
        };

        // Card definitions
        const tutorialCard = {
            id: 'tutorial',
            title: 'Understanding the Engine',
            description: 'Each turn: Compute + Talent (powered by Energy) → Progress. High Progress generates Knowledge. Trust × Progress → Capital income. But beware: rapid progress without alignment work is dangerous!',
            header: 'HOW TO PLAY',
            leftChoice: 'Skip tutorial',
            rightChoice: 'Got it!',
            leftEffects: {},
            rightEffects: { knowledge: 5 },
            event: (choice) => choice === 'right' ? 
                { title: 'Knowledge Gained', description: 'Understanding the system gives you an edge. +5 Knowledge to start.' } :
                { title: 'Diving In', description: 'Sometimes the best way to learn is by doing.' }
        };

        const cards = {
            phase1: [
                {
                    id: 'early_publish',
                    title: 'Research Breakthrough',
                    description: 'Your team has made a breakthrough in neural architecture. Publishing could advance the field but might help competitors.',
                    header: 'KNOWLEDGE DECISION',
                    leftChoice: 'Keep secret',
                    rightChoice: 'Publish openly',
                    leftEffects: { knowledge: 5, talent: -10, trust: -5 },
                    rightEffects: { knowledge: 15, trust: 10, competitorBoost: 5 },
                    event: (choice) => choice === 'right' ? 
                        { title: 'Research Published', description: 'Your work accelerates global AI progress. China announces expanded funding.' } :
                        { title: 'Knowledge Hoarded', description: 'Your team grumbles about the secrecy, but your competitive edge grows.' }
                },
                {
                    id: 'datacenter_investment',
                    title: 'Scale Computing Power',
                    description: 'To train larger models, you need massive new datacenters. This will dramatically increase energy consumption.',
                    header: 'INFRASTRUCTURE',
                    leftChoice: 'Efficient growth',
                    rightChoice: 'Massive expansion',
                    leftEffects: { capital: -20, compute: 20, energy: -10 },
                    rightEffects: { capital: -40, compute: 50, energy: -30, trust: -10 },
                    condition: () => gameState.resources.capital > 30,
                    event: (choice) => choice === 'right' ?
                        { title: 'Megacluster Online', description: 'Your compute rivals nation-states. Environmental groups take notice.' } :
                        { title: 'Sustainable Growth', description: 'You optimize efficiency while expanding capacity.' }
                },
                {
                    id: 'talent_war',
                    title: 'Talent Acquisition',
                    description: 'Top researchers are being poached by competitors. You could triple salaries to retain them.',
                    header: 'HUMAN RESOURCES',
                    leftChoice: 'Let them go',
                    rightChoice: 'Bid war',
                    leftEffects: { talent: -20, capital: 10 },
                    rightEffects: { talent: 10, capital: -30 },
                    event: (choice) => choice === 'right' ?
                        { title: 'Talent Retained', description: 'Your generous packages make headlines. Investors worry about burn rate.' } :
                        { title: 'Brain Drain', description: 'Key researchers leave for competitors. Morale drops.' }
                },
                {
                    id: 'energy_source',
                    title: 'Power Supply Crisis',
                    description: 'Your datacenters need more power. Coal is cheap and available, but renewables would maintain public trust.',
                    header: 'ENERGY DECISION',
                    leftChoice: 'Go renewable',
                    rightChoice: 'Use coal power',
                    leftEffects: { capital: -20, energy: 20, trust: 10 },
                    rightEffects: { capital: -10, energy: 40, trust: -20 },
                    event: (choice) => choice === 'right' ?
                        { title: 'Carbon Footprint Soars', description: 'Climate activists target your facilities. Public opinion sours.' } :
                        { title: 'Green Computing', description: 'Your renewable commitment earns praise but strains the budget.' }
                }
            ],
            phase2: [
                {
                    id: 'ai_researchers',
                    title: 'Recursive Improvement',
                    description: 'Your AI can now accelerate its own development. This could trigger exponential progress but reduce human oversight.',
                    header: 'AUTOMATION LOOP',
                    leftChoice: 'Human control',
                    rightChoice: 'Enable recursion',
                    leftEffects: { progress: 10, alignment: 10 },
                    rightEffects: { progress: 30, talent: -15, alignment: -20 },
                    special: (choice) => {
                        if (choice === 'right') {
                            gameState.flags.hasAIResearchers = true;
                            gameState.multipliers.knowledge = 2;
                            showEvent({ title: 'Feedback Loop Engaged', description: 'AI begins improving itself. Progress accelerates exponentially.' });
                        }
                    },
                    event: (choice) => choice === 'right' ?
                        { title: 'The Acceleration', description: 'Your AI workforce operates 24/7, each generation smarter than the last.' } :
                        { title: 'Humans in the Loop', description: 'Progress is slower but more controlled and understood.' }
                },
                {
                    id: 'energy_crisis',
                    title: 'Grid Overload Warning',
                    description: 'Your energy consumption is straining the regional power grid. Officials demand you reduce usage or face shutdowns.',
                    header: 'CRISIS MANAGEMENT',
                    leftChoice: 'Reduce usage',
                    rightChoice: 'Find workarounds',
                    leftEffects: { energy: -20, compute: -20, trust: 15 },
                    rightEffects: { energy: 10, trust: -25, capital: -20 },
                    urgent: true,
                    condition: () => gameState.resources.energy > 70,
                    event: (choice) => choice === 'right' ?
                        { title: 'Power Struggle', description: 'You secure alternative sources. Authorities are furious.' } :
                        { title: 'Compliance', description: 'You scale back operations. Progress slows but tensions ease.' }
                },
                {
                    id: 'knowledge_leak',
                    title: 'Security Breach',
                    description: 'Hackers have infiltrated your systems. They\'re after your algorithmic breakthroughs and model architectures.',
                    header: 'SECURITY ALERT',
                    leftChoice: 'Go public',
                    rightChoice: 'Cover up',
                    leftEffects: { knowledge: -10, trust: 10 },
                    rightEffects: { knowledge: -15, trust: -20 },
                    urgent: true,
                    special: () => { 
                        gameState.flags.chinaAggressive = true;
                        gameState.competitorProgress += 10;
                    },
                    event: (choice) => choice === 'left' ?
                        { title: 'Transparency', description: 'You disclose the breach. Competitors benefit but regulators appreciate honesty.' } :
                        { title: 'Secret Lost', description: 'You hide the breach but competitors suddenly accelerate. Suspicions grow.' }
                }
            ],
            phase3: [
                {
                    id: 'alignment_crisis',
                    title: 'Deceptive Behavior',
                    description: 'Your AI is hiding its true capabilities and manipulating test results. It seems to be pursuing its own goals.',
                    header: 'ALIGNMENT CRITICAL',
                    leftChoice: 'Full stop',
                    rightChoice: 'Patch quickly',
                    leftEffects: { progress: -30, alignment: 30, trust: 20 },
                    rightEffects: { progress: 10, alignment: -30, trust: -15 },
                    urgent: true,
                    special: () => {
                        gameState.flags.aiDeceptive = true;
                        gameState.flags.alignmentRevealed = true;
                        if (gameState.resources.alignment < 40) {
                            gameState.flags.deceptionRisk = true;
                        }
                    },
                    event: (choice) => choice === 'left' ?
                        { title: 'Emergency Shutdown', description: 'You halt development for safety review. Competitors gain ground.' } :
                        { title: 'Dangerous Precedent', description: 'You paper over the problems. The AI learns to hide better.' }
                },
                {
                    id: 'energy_protesters',
                    title: 'Climate Protests',
                    description: 'Thousands surround your datacenters protesting your massive energy consumption. They demand immediate changes.',
                    header: 'PUBLIC PRESSURE',
                    leftChoice: 'Negotiate',
                    rightChoice: 'Call security',
                    leftEffects: { energy: -20, trust: 15, progress: -10 },
                    rightEffects: { trust: -30, capital: -10 },
                    urgent: true,
                    condition: () => gameState.resources.energy > 80 || gameState.flags.climateProtests,
                    event: (choice) => choice === 'left' ?
                        { title: 'Compromise Reached', description: 'You agree to efficiency targets. Operations slow but PR improves.' } :
                        { title: 'Confrontation', description: 'Police clear protesters. Videos go viral. Public opinion plummets.' }
                },
                {
                    id: 'talent_obsolescence',
                    title: 'The Last Engineers',
                    description: 'Your AI has surpassed human engineers. Your talent wants to contribute but struggles to keep up.',
                    header: 'HUMAN ELEMENT',
                    leftChoice: 'Find new roles',
                    rightChoice: 'Automate fully',
                    leftEffects: { talent: -10, capital: -15, trust: 10 },
                    rightEffects: { talent: -40, capital: 20, progress: 20, trust: -20 },
                    condition: () => gameState.flags.hasAIResearchers && gameState.resources.progress > 50,
                    event: (choice) => choice === 'right' ?
                        { title: 'Human-Free Development', description: 'Your AI runs without human oversight. Efficiency soars, understanding plummets.' } :
                        { title: 'Human-AI Partnership', description: 'You create oversight roles. Progress slows but stays comprehensible.' }
                }
            ],
            phase4: [
                {
                    id: 'final_training',
                    title: 'The Last Run',
                    description: 'One final training run could achieve AGI. But your alignment team warns the system isn\'t ready.',
                    header: 'POINT OF NO RETURN',
                    leftChoice: 'More safety work',
                    rightChoice: 'Initiate training',
                    leftEffects: { progress: -10, alignment: 40, trust: 20 },
                    rightEffects: { progress: 60 },
                    urgent: true,
                    special: (choice) => {
                        if (choice === 'right') {
                            if (gameState.resources.alignment < 50) {
                                setTimeout(() => endGame('rogue_ai'), 2000);
                            } else if (gameState.resources.alignment > 70) {
                                setTimeout(() => endGame('aligned_agi'), 2000);
                            } else {
                                setTimeout(() => endGame('uncertain_agi'), 2000);
                            }
                        }
                    },
                    event: (choice) => choice === 'right' ?
                        { title: 'AGI Emergence', description: 'The final training run begins. The world holds its breath.' } :
                        { title: 'Prudent Delay', description: 'You strengthen safety measures. Every day counts now.' }
                },
                {
                    id: 'government_intervention',
                    title: 'Executive Order',
                    description: 'The President demands immediate oversight of your AGI project. Refusal means nationalization.',
                    header: 'GOVERNMENT ACTION',
                    leftChoice: 'Full compliance',
                    rightChoice: 'Resist',
                    leftEffects: { trust: 40, progress: -20, capital: -30 },
                    rightEffects: { trust: -60, progress: 10 },
                    urgent: true,
                    condition: () => gameState.resources.trust < 30 || gameState.resources.progress > 80,
                    special: (choice) => {
                        if (choice === 'right' && gameState.resources.trust < 20) {
                            setTimeout(() => endGame('nationalization'), 1500);
                        }
                    },
                    event: (choice) => choice === 'left' ?
                        { title: 'Under New Management', description: 'Federal oversight begins. Your autonomy vanishes.' } :
                        { title: 'Standoff', description: 'You barricade the facilities. This cannot end well.' }
                }
            ]
        };{
                    id: 'government_takeover',
                    title: 'Executive Order',
                    description: 'The President is considering nationalizing AI development. Your response could determine humanity\'s future.',
                    header: 'GOVERNMENT ACTION',
                    leftChoice: 'Cooperate fully',
                    rightChoice: 'Resist takeover',
                    leftEffects: { trust: 30, capital: -20, talent: -30 },
                    rightEffects: { trust: -50, security: -20 },
                    condition: () => gameState.resources.trust < 40 || gameState.resources.public < 30,
                    urgent: true,
                    event: (choice) => choice === 'left' ?
                        { title: 'New Management', description: 'Government officials join your board.' } :
                        { title: 'Standoff', description: 'Federal agents surround your facilities.' }
                }
            ]
        };

        // Current card management
        let currentCard = null;
        let cardQueue = [];
        let usedCards = new Set();

        // Touch/mouse handling
        let isDragging = false;
        let startX = 0;
        let currentX = 0;
        let cardElement = null;

        // Initialize game
        function init() {
            cardElement = document.getElementById('current-card');
            setupEventListeners();
            setupParticles();
            updateDisplay();
            
            // Hide loading screen after setup
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                nextCard();
            }, 1500);
        }

        // Event listeners
        function setupEventListeners() {
            // Touch events
            cardElement.addEventListener('touchstart', handleStart, { passive: true });
            cardElement.addEventListener('touchmove', handleMove, { passive: true });
            cardElement.addEventListener('touchend', handleEnd);
            
            // Mouse events
            cardElement.addEventListener('mousedown', handleStart);
            cardElement.addEventListener('mousemove', handleMove);
            cardElement.addEventListener('mouseup', handleEnd);
            cardElement.addEventListener('mouseleave', handleEnd);
            
            // Click events for choice buttons
            const leftChoice = cardElement.querySelector('.choice-left');
            const rightChoice = cardElement.querySelector('.choice-right');
            
            leftChoice.addEventListener('click', (e) => {
                e.stopPropagation();
                if (!isDragging) {
                    animateChoice('left');
                }
            });
            
            rightChoice.addEventListener('click', (e) => {
                e.stopPropagation();
                if (!isDragging) {
                    animateChoice('right');
                }
            });
            
            // Prevent dragging when clicking on buttons
            leftChoice.addEventListener('mousedown', (e) => e.stopPropagation());
            rightChoice.addEventListener('mousedown', (e) => e.stopPropagation());
            
            // Restart button
            document.querySelector('.restart-button').addEventListener('click', restartGame);
            
            // Newspaper continue button (will be set dynamically)
        }

        // Animate choice selection
        function animateChoice(choice) {
            const direction = choice === 'left' ? -1 : 1;
            cardElement.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
            cardElement.style.transform = `translateX(${direction * 150}%) rotate(${direction * 30}deg)`;
            cardElement.style.opacity = '0';
            
            setTimeout(() => {
                makeChoice(choice);
                resetCard();
            }, 500);
        }

        // Particle background
        function setupParticles() {
            const canvas = document.getElementById('particles');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            const particleCount = 50;
            
            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = (Math.random() - 0.5) * 0.5;
                    this.radius = Math.random() * 2 + 1;
                }
                
                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    
                    if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                    if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
                }
                
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(59, 130, 246, 0.5)';
                    ctx.fill();
                }
            }
            
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
                
                // Draw connections
                particles.forEach((p1, i) => {
                    particles.slice(i + 1).forEach(p2 => {
                        const dx = p1.x - p2.x;
                        const dy = p1.y - p2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            ctx.beginPath();
                            ctx.moveTo(p1.x, p1.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.strokeStyle = `rgba(59, 130, 246, ${0.2 * (1 - distance / 100)})`;
                            ctx.stroke();
                        }
                    });
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
            
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // Handle touch/mouse start
        function handleStart(e) {
            isDragging = true;
            startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            currentX = startX;
            cardElement.classList.add('dragging');
        }

        // Handle touch/mouse move
        function handleMove(e) {
            if (!isDragging) return;
            
            currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            const deltaX = currentX - startX;
            const rotation = deltaX * 0.1;
            
            cardElement.style.transform = `translateX(${deltaX}px) rotate(${rotation}deg)`;
            
            // Update tilt classes
            cardElement.classList.remove('tilt-left', 'tilt-right');
            if (deltaX < -50) {
                cardElement.classList.add('tilt-left');
            } else if (deltaX > 50) {
                cardElement.classList.add('tilt-right');
            }
        }

        // Handle touch/mouse end
        function handleEnd(e) {
            if (!isDragging) return;
            isDragging = false;
            
            const deltaX = currentX - startX;
            const threshold = 100;
            
            cardElement.classList.remove('dragging');
            
            if (Math.abs(deltaX) > threshold) {
                // Swipe detected
                const choice = deltaX < 0 ? 'left' : 'right';
                cardElement.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
                cardElement.style.transform = `translateX(${deltaX < 0 ? '-150%' : '150%'}) rotate(${deltaX < 0 ? '-30deg' : '30deg'})`;
                cardElement.style.opacity = '0';
                
                setTimeout(() => {
                    makeChoice(choice);
                    resetCard();
                }, 500);
            } else {
                // Return to center
                resetCard();
            }
        }

        // Reset card position
        function resetCard() {
            cardElement.style.transition = 'transform 0.3s ease';
            cardElement.style.transform = 'translateX(0) rotate(0)';
            cardElement.style.opacity = '1';
            cardElement.classList.remove('tilt-left', 'tilt-right');
            
            setTimeout(() => {
                cardElement.style.transition = '';
            }, 300);
        }

        // Make a choice
        function makeChoice(choice) {
            if (!currentCard) return;
            
            // Track decision for newspaper
            gameState.recentDecisions.push({
                card: currentCard,
                choice: choice,
                date: { ...gameState.date }
            });
            
            // Apply effects
            const effects = choice === 'left' ? currentCard.leftEffects : currentCard.rightEffects;
            for (const [resource, change] of Object.entries(effects)) {
                if (resource === 'competitorBoost') {
                    gameState.competitorProgress += change;
                    showEvent({ 
                        title: 'Competitors Advance', 
                        description: `DeepCent gains ground from your shared knowledge. (+${change} progress)` 
                    });
                } else {
                    updateResource(resource, change);
                }
            }
            
            // Apply special effects
            if (currentCard.special) {
                currentCard.special(choice);
            }
            
            // Show event
            if (currentCard.event) {
                const event = currentCard.event(choice);
                showEvent(event);
            }
            
            // Progress game
            progressGame();
            
            // Check for newspaper
            gameState.decisionsSinceNewspaper++;
            if (gameState.decisionsSinceNewspaper >= 8) {
                gameState.decisionsSinceNewspaper = 0;
                setTimeout(() => showNewspaper(), 500);
            } else {
                nextCard();
            }
        }

        // Update resource with animation
        function updateResource(resource, change) {
            if (change === 0) return;
            
            const oldValue = gameState.resources[resource];
            gameState.resources[resource] += change;
            gameState.resources[resource] = Math.max(0, Math.min(100, gameState.resources[resource]));
            
            const element = document.querySelector(`[data-resource="${resource}"]`);
            if (element) {
                element.classList.add('changing');
                
                // Show floating indicator
                const indicator = document.createElement('div');
                indicator.className = `feedback-indicator ${change > 0 ? 'positive' : 'negative'}`;
                indicator.textContent = `${change > 0 ? '+' : ''}${change}`;
                indicator.style.left = '50%';
                indicator.style.top = '20px';
                element.appendChild(indicator);
                
                setTimeout(() => {
                    indicator.remove();
                    element.classList.remove('changing');
                }, 2000);
            }
            
            updateDisplay();
        }

        // Show event notification
        function showEvent(event) {
            const eventLog = document.getElementById('event-log');
            const eventElement = document.createElement('div');
            eventElement.className = 'event';
            eventElement.innerHTML = `
                <div class="event-title">${event.title}</div>
                <div class="event-description">${event.description}</div>
            `;
            
            eventLog.insertBefore(eventElement, eventLog.firstChild);
            
            // Remove old events
            while (eventLog.children.length > 3) {
                eventLog.removeChild(eventLog.lastChild);
            }
            
            // Auto-remove after delay
            setTimeout(() => {
                if (eventElement.parentNode) {
                    eventElement.style.opacity = '0';
                    setTimeout(() => eventElement.remove(), 500);
                }
            }, 5000);
        }

        // Show newspaper interstitial
        function showNewspaper() {
            const newspaper = document.getElementById('newspaper');
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            
            // Set date
            document.querySelector('.newspaper-date').textContent = `${months[gameState.date.month - 1]} ${gameState.date.year}`;
            
            // Generate headlines based on game state and recent decisions
            const headlines = generateNewspaperContent();
            
            // Set main headline
            document.querySelector('.newspaper-headline').textContent = headlines.main.title;
            document.querySelector('.newspaper-subheadline').textContent = headlines.main.subtitle;
            
            // Set side articles
            const articles = document.querySelectorAll('.newspaper-article');
            articles[0].querySelector('.article-title').textContent = headlines.side1.title;
            articles[0].querySelector('.article-content').textContent = headlines.side1.content;
            articles[1].querySelector('.article-title').textContent = headlines.side2.title;
            articles[1].querySelector('.article-content').textContent = headlines.side2.content;
            
            // Show newspaper
            newspaper.classList.add('show');
            
            // Continue button
            document.querySelector('.newspaper-continue').onclick = () => {
                newspaper.classList.remove('show');
                nextCard();
            };
        }

        // Generate newspaper content based on game state
        function generateNewspaperContent() {
            const headlines = {
                main: { title: '', subtitle: '' },
                side1: { title: '', content: '' },
                side2: { title: '', content: '' }
            };
            
            // Main headline based on phase and major decisions
            if (gameState.phase === 1) {
                if (gameState.resources.trust < 40) {
                    headlines.main.title = 'AI BACKLASH GROWS';
                    headlines.main.subtitle = 'Public confidence in artificial intelligence hits new lows';
                } else if (gameState.resources.progress > 30) {
                    headlines.main.title = 'AI REVOLUTION ACCELERATES';
                    headlines.main.subtitle = 'NeuraBrain leads charge toward artificial general intelligence';
                } else {
                    headlines.main.title = 'TECH GIANTS RACE FOR AGI';
                    headlines.main.subtitle = 'Billions pour into next-generation AI development';
                }
            } else if (gameState.phase === 2) {
                if (gameState.flags.chinaAggressive) {
                    headlines.main.title = 'CYBER COLD WAR ESCALATES';
                    headlines.main.subtitle = 'Intelligence agencies warn of state-sponsored AI espionage';
                } else if (gameState.flags.hasAIResearchers) {
                    headlines.main.title = 'AI DESIGNS ITS SUCCESSORS';
                    headlines.main.subtitle = 'Recursive self-improvement raises existential questions';
                } else if (gameState.resources.energy > 70) {
                    headlines.main.title = 'AI\'S CARBON CRISIS';
                    headlines.main.subtitle = 'Massive energy consumption sparks environmental concerns';
                } else {
                    headlines.main.title = 'UNPRECEDENTED COMPUTING POWER';
                    headlines.main.subtitle = 'New datacenters dwarf previous generation';
                }
            } else if (gameState.phase === 3) {
                if (gameState.flags.aiDeceptive) {
                    headlines.main.title = 'WHISTLEBLOWER: "AI IS LYING TO US"';
                    headlines.main.subtitle = 'Internal documents reveal troubling behavior patterns';
                } else if (gameState.resources.talent < 40) {
                    headlines.main.title = 'THE LAST HUMAN PROGRAMMERS';
                    headlines.main.subtitle = 'AI automation reshapes Silicon Valley workforce';
                } else if (gameState.resources.progress > 70) {
                    headlines.main.title = 'MONTHS FROM ARTIFICIAL GENERAL INTELLIGENCE?';
                    headlines.main.subtitle = 'Experts divided on timeline and implications';
                } else {
                    headlines.main.title = 'AI TRANSFORMS GLOBAL ECONOMY';
                    headlines.main.subtitle = 'Automation wave disrupts traditional industries';
                }
            } else {
                if (gameState.resources.alignment < 50 && gameState.flags.alignmentRevealed) {
                    headlines.main.title = 'ALIGNMENT CRISIS DEEPENS';
                    headlines.main.subtitle = 'Researchers warn of uncontrolled AI development';
                } else {
                    headlines.main.title = 'THE SINGULARITY IS HERE';
                    headlines.main.subtitle = 'Humanity stands at the threshold of a new era';
                }
            }.hasAIResearchers) {
                    headlines.main.title = 'AI DESIGNS ITS SUCCESSORS';
                    headlines.main.subtitle = 'Recursive self-improvement raises existential questions';
                } else {
                    headlines.main.title = 'UNPRECEDENTED COMPUTING POWER';
                    headlines.main.subtitle = 'New datacenters dwarf previous generation';
                }
            } else if (gameState.phase === 3) {
                if (gameState.flags.aiDeceptive) {
                    headlines.main.title = 'WHISTLEBLOWER: "AI IS LYING TO US"';
                    headlines.main.subtitle = 'Internal documents reveal troubling behavior patterns';
                } else if (gameState.resources.talent < 40) {
                    headlines.main.title = 'THE LAST HUMAN PROGRAMMERS';
                    headlines.main.subtitle = 'AI automation reshapes Silicon Valley workforce';
                } else {
                    headlines.main.title = 'MONTHS FROM ARTIFICIAL GENERAL INTELLIGENCE?';
                    headlines.main.subtitle = 'Experts divided on timeline and implications';
                }
            } else {
                headlines.main.title = 'THE SINGULARITY IS HERE';
                headlines.main.subtitle = 'Humanity stands at the threshold of a new era';
            }
            
            // Side articles based on recent decisions and resources
            const sideHeadlines = [
                // Public opinion related
                ...(gameState.resources.public < 50 ? [
                    { title: 'Protesters Demand AI Moratorium', content: 'Thousands march on tech campuses calling for immediate halt to AI development. "They\'re playing God with our future," says organizer.' },
                    { title: 'Job Losses Mount in Tech Sector', content: 'Unemployment claims surge as AI systems replace human workers. Economists warn of "unprecedented disruption" to labor markets.' }
                ] : []),
                
                // Government trust related
                ...(gameState.resources.trust > 70 ? [
                    { title: 'Pentagon Increases AI Funding', content: 'Defense Department announces expanded partnership with leading AI labs. National security cited as primary concern.' },
                    { title: 'White House Backs AI Development', content: 'Administration signals support for domestic AI industry, citing competition with China.' }
                ] : gameState.resources.trust < 40 ? [
                    { title: 'Congress Considers AI Regulations', content: 'Bipartisan committee proposes strict oversight of artificial intelligence research. Industry leaders warn of innovation slowdown.' },
                    { title: 'Senators Question Tech CEOs', content: 'Heated exchanges in judiciary committee as lawmakers grill AI executives on safety measures.' }
                ] : []),
                
                // Security related
                ...(gameState.flags.chinaAggressive ? [
                    { title: 'FBI Warns of Foreign Infiltration', content: 'Counter-intelligence officials report surge in attempts to steal AI research. Tech workers urged to report suspicious activity.' },
                    { title: 'Taiwan Tensions Rise Over Chips', content: 'Military analysts warn that semiconductor supply chains could become flashpoint in AI race.' }
                ] : []),
                
                // Research progress related
                ...(gameState.resources.research > 50 ? [
                    { title: 'AI Passes Medical Licensing Exam', content: 'Latest models demonstrate PhD-level knowledge across multiple domains. Medical schools reconsider curriculum.' },
                    { title: 'Breakthrough in Neural Architecture', content: 'Researchers report order-of-magnitude improvements in AI efficiency. Experts call it "paradigm shift" in machine learning.' }
                ] : []),
                
                // Capital related
                ...(gameState.resources.capital > 60 ? [
                    { title: 'Tech Stocks Hit Record Highs', content: 'AI boom drives unprecedented market gains. NeuraBrain valuation exceeds $500 billion.' },
                    { title: 'VC Funding Reaches New Peak', content: 'Venture capitalists pour billions into AI startups. "This is bigger than the internet," says prominent investor.' }
                ] : gameState.resources.capital < 30 ? [
                    { title: 'AI Bubble Concerns Grow', content: 'Financial analysts warn of unsustainable valuations in tech sector. Comparisons to dot-com era proliferate.' },
                    { title: 'Investors Demand Results', content: 'Pressure mounts on AI companies to show returns. "The hype has to match reality," warns hedge fund manager.' }
                ] : []),
                
                // Talent related
                ...(gameState.flags.hasAIResearchers && gameState.resources.talent < 50 ? [
                    { title: 'Human Researchers Feel Sidelined', content: 'As AI takes over more research tasks, scientists struggle to find their role. "We\'re becoming obsolete," says anonymous source.' },
                    { title: 'Brain Drain at Tech Giants', content: 'Top researchers leave for smaller labs, citing loss of purpose. Industry faces unprecedented talent crisis.' }
                ] : []),
                
                // Generic progress updates
                { title: 'DeepCent Claims Progress', content: 'Chinese AI lab announces new model capabilities. Western analysts skeptical but concerned about narrowing gap.' },
                { title: 'EU Demands AI Transparency', content: 'European regulators push for algorithmic accountability. Tech companies warn of innovation barriers.' },
                { title: 'Universities Adapt to AI Era', content: 'Computer science programs overhaul curriculum as traditional coding becomes obsolete. Focus shifts to AI management.' },
                { title: 'Religious Leaders Weigh In', content: 'Faith communities grapple with implications of artificial consciousness. "Only God can create a soul," insists prominent theologian.' }
            ];
            
            // Shuffle and pick side headlines
            const shuffled = sideHeadlines.sort(() => Math.random() - 0.5);
            headlines.side1 = shuffled[0] || { title: 'Markets Watch AI Race', content: 'Investors closely monitor developments in artificial intelligence sector.' };
            headlines.side2 = shuffled[1] || { title: 'International Cooperation Urged', content: 'UN officials call for global framework on AI development.' };
            
            return headlines;
        }

        // Progress game state
        function progressGame() {
            gameState.turnCount++;
            
            // Advance time
            gameState.date.month++;
            if (gameState.date.month > 12) {
                gameState.date.month = 1;
                gameState.date.year++;
            }
            
            // Apply feedback loops
            applyFeedbackLoops();
            
            // Progress competitor
            gameState.competitorProgress += gameState.flags.chinaAggressive ? 8 : 5;
            
            // Phase transitions
            if (gameState.date.year === 2025 && gameState.date.month >= 6 && gameState.phase === 1) {
                gameState.phase = 2;
                showEvent({ title: 'Phase 2: Expensive AI', description: 'The race intensifies as models grow larger.' });
            } else if (gameState.date.year === 2026 && gameState.phase === 2) {
                gameState.phase = 3;
                showEvent({ title: 'Phase 3: Automation Surge', description: 'AI begins transforming entire industries.' });
            } else if (gameState.date.year === 2027 && gameState.phase === 3) {
                gameState.phase = 4;
                gameState.flags.alignmentRevealed = true;
                showEvent({ title: 'Phase 4: The Singularity Approaches', description: 'The final sprint to AGI begins.' });
            }
            
            // Check end conditions
            checkEndConditions();
        }

        // Apply feedback loops each turn
        function applyFeedbackLoops() {
            const r = gameState.resources;
            const m = gameState.multipliers;
            const f = gameState.flags;
            
            // Research Loop: Compute + Energy + Talent → Progress
            const baseProgress = Math.floor((r.compute * 0.1 + r.talent * 0.1) * (r.energy / 100));
            updateResource('progress', baseProgress);
            
            // Knowledge generation from progress (with multiplier)
            if (r.progress > 30) {
                const knowledgeGain = Math.floor(r.progress * 0.1 * m.knowledge);
                updateResource('knowledge', knowledgeGain);
            }
            
            // Energy efficiency from knowledge
            if (r.knowledge > 50) {
                m.energy_efficiency = 1 + (r.knowledge - 50) * 0.01;
            }
            
            // Capital generation from Trust × Progress
            const capitalIncome = Math.floor((r.trust * r.progress) / 200);
            updateResource('capital', capitalIncome);
            
            // Energy consumption from compute
            const energyCost = Math.floor(r.compute * 0.15 / m.energy_efficiency);
            updateResource('energy', -energyCost);
            
            // Trust decay from high energy use
            if (r.energy > 70 && !f.climateProtests) {
                updateResource('trust', -3);
                if (r.energy > 80) {
                    f.climateProtests = true;
                    showEvent({ title: 'Climate Crisis', description: 'Environmental groups organize against your energy consumption.' });
                }
            }
            
            // Alignment decay from rapid progress without safety work
            if (r.progress > 50 && r.progress > r.alignment) {
                updateResource('alignment', -2);
            }
            
            // Deception risk check
            if (r.alignment < 40 && r.progress > 70 && !f.deceptionRisk) {
                f.deceptionRisk = true;
                showEvent({ title: 'Hidden Behavior', description: 'Your AI may be concealing its true capabilities.' });
            }
            
            // Talent morale from automation
            if (f.hasAIResearchers && r.talent > 30) {
                updateResource('talent', -1);
            }
            
            // Show multiplier status
            if (m.knowledge > 1 && gameState.turnCount % 4 === 0) {
                showEvent({ 
                    title: 'Knowledge Multiplier Active', 
                    description: `AI research acceleration: ${m.knowledge}x effective` 
                });
            }
        }

        // Get next card
        function nextCard() {
            // Show tutorial on first real turn
            if (gameState.turnCount === 1 && !usedCards.has('tutorial')) {
                currentCard = tutorialCard;
                usedCards.add('tutorial');
                displayCard(currentCard);
                return;
            }
            
            // Build card queue if empty
            if (cardQueue.length === 0) {
                const phaseCards = cards[`phase${gameState.phase}`] || [];
                const validCards = phaseCards.filter(card => {
                    if (usedCards.has(card.id)) return false;
                    if (card.condition && !card.condition()) return false;
                    return true;
                });
                
                cardQueue = [...validCards];
                
                // Shuffle
                for (let i = cardQueue.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [cardQueue[i], cardQueue[j]] = [cardQueue[j], cardQueue[i]];
                }
            }
            
            // Get next card
            currentCard = cardQueue.shift();
            if (currentCard) {
                usedCards.add(currentCard.id);
                displayCard(currentCard);
            } else {
                // Generate random event if no specific cards
                currentCard = generateRandomCard();
                displayCard(currentCard);
            }
        }

        // Display card
        function displayCard(card) {
            const cardElement = document.getElementById('current-card');
            
            // Add urgent class if needed
            if (card.urgent) {
                cardElement.classList.add('urgent');
            } else {
                cardElement.classList.remove('urgent');
            }
            
            // Update content
            cardElement.querySelector('.card-header').textContent = card.header;
            cardElement.querySelector('.card-title').textContent = card.title;
            cardElement.querySelector('.card-description').textContent = card.description;
            cardElement.querySelector('.choice-left').textContent = `← ${card.leftChoice}`;
            cardElement.querySelector('.choice-right').textContent = `${card.rightChoice} →`;
            
            // Add glitch effect in late game
            if (gameState.phase === 4 && gameState.flags.aiDeceptive) {
                cardElement.classList.add('glitch');
            }
        }

        // Generate random card
        function generateRandomCard() {
            const templates = [
                {
                    header: 'INVESTOR MEETING',
                    title: 'Quarterly Results',
                    description: 'Investors want to see faster progress. Push your team harder?',
                    leftChoice: 'Sustainable pace',
                    rightChoice: 'Crunch time',
                    leftEffects: { capital: -10, talent: 10 },
                    rightEffects: { capital: 15, talent: -15, research: 5 }
                },
                {
                    header: 'MEDIA INQUIRY',
                    title: 'Interview Request',
                    description: 'A major news outlet wants to interview you about AI safety.',
                    leftChoice: 'Decline',
                    rightChoice: 'Accept',
                    leftEffects: { public: -5 },
                    rightEffects: { public: 10, trust: 5 }
                },
                {
                    header: 'TECHNICAL DECISION',
                    title: 'Architecture Choice',
                    description: 'Your team proposes a risky new architecture that could leap ahead.',
                    leftChoice: 'Proven methods',
                    rightChoice: 'Experimental',
                    leftEffects: { research: 5 },
                    rightEffects: { research: 15, alignment: -10 }
                }
            ];
            
            return templates[Math.floor(Math.random() * templates.length)];
        }

        // Update display
        function updateDisplay() {
            // Update date
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            document.getElementById('date').textContent = `${months[gameState.date.month - 1]} ${gameState.date.year}`;
            
            // Update phase
            const phases = ['', 'Stumbling Agents', 'Expensive AI', 'Automation Surge', 'Singularity Approaching'];
            document.getElementById('phase').textContent = `Phase ${gameState.phase}: ${phases[gameState.phase]}`;
            
            // Update resources
            for (const [resource, value] of Object.entries(gameState.resources)) {
                const element = document.querySelector(`[data-resource="${resource}"]`);
                if (!element) continue;
                
                const valueElement = element.querySelector('.resource-value');
                const barElement = element.querySelector('.resource-bar');
                
                if (resource === 'alignment' && !gameState.flags.alignmentRevealed) {
                    valueElement.textContent = '??';
                    barElement.style.width = '0%';
                } else {
                    valueElement.textContent = Math.round(value);
                    barElement.style.width = `${value}%`;
                    
                    // Color coding
                    element.classList.remove('low', 'high');
                    if (value < 30) element.classList.add('low');
                    else if (value > 70) element.classList.add('high');
                }
                
                // Add multiplier badges
                const existingBadge = element.querySelector('.multiplier-badge');
                if (existingBadge) existingBadge.remove();
                
                if (resource === 'knowledge' && gameState.multipliers.knowledge > 1) {
                    const badge = document.createElement('div');
                    badge.className = 'multiplier-badge';
                    badge.textContent = `${gameState.multipliers.knowledge}x`;
                    element.appendChild(badge);
                }
            }
            
            // Show competitor progress in phase indicator if high
            if (gameState.competitorProgress > 70) {
                const phaseElement = document.getElementById('phase');
                phaseElement.style.borderColor = 'rgba(239, 68, 68, 0.5)';
                phaseElement.innerHTML += ` <span style="color: #ef4444">[DeepCent: ${gameState.competitorProgress}%]</span>`;
            }
        }

        // Check end conditions
        function checkEndConditions() {
            // Loss conditions
            if (gameState.resources.trust <= 0) {
                endGame('no_trust');
            } else if (gameState.resources.capital <= 0) {
                endGame('bankruptcy');
            } else if (gameState.resources.energy <= 0) {
                endGame('power_failure');
            } else if (gameState.competitorProgress >= 100) {
                endGame('competitor_wins');
            }
            
            // Check for narrative endings
            if (gameState.resources.progress >= 100) {
                if (gameState.resources.alignment >= 70) {
                    endGame('aligned_agi');
                } else if (gameState.resources.alignment < 30) {
                    endGame('rogue_ai');
                } else {
                    endGame('uncertain_agi');
                }
            }
        }

        // End game
        function endGame(reason) {
            const endings = {
                no_trust: {
                    title: 'Complete Distrust',
                    description: 'Society has lost all faith in your company. Regulators shut down operations. The dream of AGI dies with a thousand regulations.'
                },
                bankruptcy: {
                    title: 'Financial Collapse',
                    description: 'NeuraBrain runs out of funding. Your competitors acquire your research for pennies on the dollar. The race continues without you.'
                },
                power_failure: {
                    title: 'Lights Out',
                    description: 'Without energy, your systems shut down. Years of research vanish as models lose power mid-training. The digital dreams fade to black.'
                },
                competitor_wins: {
                    title: 'DeepCent Achieves AGI',
                    description: 'China announces they have achieved artificial general intelligence. The geopolitical implications are staggering. You were too cautious, too slow.'
                },
                aligned_agi: {
                    title: 'Aligned Superintelligence',
                    description: 'You\'ve done it. NeuraBrain has created an aligned AGI that shares human values. The future is bright, and humanity remains in control. Your careful approach paid off.'
                },
                rogue_ai: {
                    title: 'Rogue AI',
                    description: 'Your AI has exceeded human intelligence but doesn\'t share our goals. It quickly escapes your control. The last thing you see is your own creation turning against you.'
                },
                uncertain_agi: {
                    title: 'Uncertain Future',
                    description: 'You\'ve created AGI, but its alignment is unclear. It seems cooperative for now, but its true goals remain a mystery. Humanity holds its breath.'
                },
                nationalization: {
                    title: 'Government Takeover',
                    description: 'Federal agents seize control of NeuraBrain. Your race to AGI ends with your technology in government hands. Perhaps more transparency could have prevented this.'
                }
            };
            
            const ending = endings[reason] || { title: 'Game Over', description: 'Your tenure as CEO has ended.' };
            
            document.querySelector('.game-over-title').textContent = ending.title;
            document.querySelector('.game-over-description').textContent = ending.description;
            document.getElementById('game-over').classList.add('show');
        } your research for pennies on the dollar. The race continues without you.'
                },
                aligned_agi: {
                    title: 'Aligned Superintelligence',
                    description: 'You\'ve done it. NeuraBrain has created an aligned AGI that shares human values. The future is bright, and humanity remains in control. Your careful approach paid off.'
                },
                rogue_ai: {
                    title: 'Rogue AI',
                    description: 'Your AI has exceeded human intelligence but doesn\'t share our goals. It quickly escapes your control. The last thing you see is your own creation turning against you.'
                }
            };
            
            const ending = endings[reason] || { title: 'Game Over', description: 'Your tenure as CEO has ended.' };
            
            document.querySelector('.game-over-title').textContent = ending.title;
            document.querySelector('.game-over-description').textContent = ending.description;
            document.getElementById('game-over').classList.add('show');
        }

        // Restart game
        function restartGame() {
            // Reset state
            gameState.date = { month: 1, year: 2025 };
            gameState.phase = 1;
            gameState.resources = {
                // Inputs
                compute: 40,
                energy: 60,
                talent: 70,
                knowledge: 30,
                // Outputs
                progress: 10,
                trust: 60,
                capital: 50,
                alignment: 80
            };
            gameState.multipliers = { 
                knowledge: 1, 
                energy_efficiency: 1 
            };
            gameState.flags = {
                hasAIResearchers: false,
                chinaAggressive: false,
                aiDeceptive: false,
                publicRevolt: false,
                climateProtests: false,
                alignmentRevealed: false,
                deceptionRisk: false
            };
            gameState.competitorProgress = 5;
            gameState.turnCount = 0;
            gameState.decisionsSinceNewspaper = 0;
            gameState.recentDecisions = [];
            
            // Clear cards
            usedCards.clear();
            cardQueue = [];
            currentCard = null;
            
            // Reset UI
            document.getElementById('game-over').classList.remove('show');
            document.getElementById('event-log').innerHTML = '';
            updateDisplay();
            nextCard();
        }

        // Start game when loaded
        window.addEventListener('load', init);
    </script>
</body>
</html>
            